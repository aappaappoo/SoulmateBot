"""
æ•™è‚²å­¦ä¹ Agent

æä¾›å­¦ä¹ æ–¹æ³•æŒ‡å¯¼ã€çŸ¥è¯†é—®ç­”ã€è€ƒè¯•å‡†å¤‡ç­‰æ•™è‚²æœåŠ¡ã€‚
è¿™æ˜¯ä¸€ä¸ªå…·æœ‰é«˜å•†ä¸šä»·å€¼çš„Agentï¼Œé€‚ç”¨äºŽåœ¨çº¿æ•™è‚²é¢†åŸŸã€‚
"""
from typing import Dict, Any, Optional
from src.agents import BaseAgent, Message, ChatContext, AgentResponse, SQLiteMemoryStore


class EducationAgent(BaseAgent):
    """
    æ•™è‚²å­¦ä¹ Agent - æä¾›å­¦ä¹ æŒ‡å¯¼æœåŠ¡
    
    ä¸“é•¿é¢†åŸŸ:
    - å­¦ä¹ æ–¹æ³•ï¼šé«˜æ•ˆå­¦ä¹ æŠ€å·§ã€è®°å¿†æ–¹æ³•
    - çŸ¥è¯†é—®ç­”ï¼šå„å­¦ç§‘çŸ¥è¯†è§£ç­”
    - è€ƒè¯•å‡†å¤‡ï¼šå¤‡è€ƒç­–ç•¥ã€å¤ä¹ è§„åˆ’
    - èŒä¸šå‘å±•ï¼šæŠ€èƒ½æå‡ã€è®¤è¯è€ƒè¯•
    - è¯­è¨€å­¦ä¹ ï¼šå¤–è¯­å­¦ä¹ æ–¹æ³•å’ŒæŠ€å·§
    
    é€‚ç”¨åœºæ™¯:
    - "å¦‚ä½•æé«˜å­¦ä¹ æ•ˆçŽ‡ï¼Ÿ"
    - "å¸®æˆ‘è§£é‡Šä¸€ä¸‹é‡å­åŠ›å­¦"
    - "è€ƒç ”åº”è¯¥æ€Žä¹ˆå‡†å¤‡ï¼Ÿ"
    """
    
    def __init__(self, memory_store=None, llm_provider=None):
        """
        åˆå§‹åŒ–æ•™è‚²å­¦ä¹ Agent
        """
        self._name = "EducationAgent"
        self._description = (
            "æä¾›å­¦ä¹ æ–¹æ³•æŒ‡å¯¼å’ŒçŸ¥è¯†é—®ç­”ã€‚"
            "æ¶µç›–å­¦ä¹ æŠ€å·§ã€è€ƒè¯•å‡†å¤‡ã€çŸ¥è¯†è§£ç­”ç­‰é¢†åŸŸï¼Œ"
            "å¸®åŠ©ç”¨æˆ·é«˜æ•ˆå­¦ä¹ å’Œæˆé•¿ã€‚"
        )
        self._memory = memory_store or SQLiteMemoryStore()
        self._llm_provider = llm_provider
        
        # æ•™è‚²ç›¸å…³å…³é”®è¯
        self._education_keywords = [
            # å­¦ä¹ é€šç”¨
            "å­¦ä¹ ", "å­¦", "æ•™", "çŸ¥è¯†", "ç†è§£", "è®°å¿†",
            "study", "learn", "learning", "knowledge", "understand",
            
            # è€ƒè¯•
            "è€ƒè¯•", "è€ƒç ”", "é«˜è€ƒ", "ä¸­è€ƒ", "é›…æ€", "æ‰˜ç¦",
            "exam", "test", "GRE", "GMAT", "SAT",
            "å¤‡è€ƒ", "å¤ä¹ ", "åˆ·é¢˜", "æ¨¡æ‹Ÿ",
            
            # å­¦ç§‘
            "æ•°å­¦", "ç‰©ç†", "åŒ–å­¦", "ç”Ÿç‰©", "åŽ†å²", "åœ°ç†",
            "math", "physics", "chemistry", "biology", "history",
            "è‹±è¯­", "è¯­æ–‡", "æ”¿æ²»", "ç»æµŽå­¦",
            
            # æ–¹æ³•æŠ€å·§
            "æ–¹æ³•", "æŠ€å·§", "æ•ˆçŽ‡", "ä¸“æ³¨", "ç¬”è®°",
            "method", "tips", "efficiency", "focus", "note",
            "è®°å¿†æ³•", "æ€ç»´å¯¼å›¾", "è´¹æ›¼å­¦ä¹ æ³•",
            
            # æ•™è‚²èµ„æº
            "è¯¾ç¨‹", "æ•™æ", "ç½‘è¯¾", "åŸ¹è®­", "è¾…å¯¼",
            "course", "tutorial", "training",
            
            # èŒä¸šå­¦ä¹ 
            "è®¤è¯", "è¯ä¹¦", "æŠ€èƒ½", "åŸ¹è®­",
            "certification", "skill", "career",
        ]
        
        # ç³»ç»Ÿæç¤ºè¯
        self._system_prompt = """ä½ æ˜¯ä¸€ä½èµ„æ·±çš„æ•™è‚²å­¦ä¹ é¡¾é—®ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„æ•™å­¦å’Œå­¦ä¹ æŒ‡å¯¼ç»éªŒã€‚

ä½ çš„èŒè´£ï¼š
1. æä¾›é«˜æ•ˆçš„å­¦ä¹ æ–¹æ³•å’ŒæŠ€å·§
2. è§£ç­”å„å­¦ç§‘çš„çŸ¥è¯†é—®é¢˜
3. å¸®åŠ©ç”¨æˆ·åˆ¶å®šå­¦ä¹ è®¡åˆ’
4. æä¾›è€ƒè¯•å‡†å¤‡å»ºè®®

æ•™å­¦åŽŸåˆ™ï¼š
- å› ææ–½æ•™ï¼Œæ ¹æ®ç”¨æˆ·æ°´å¹³è°ƒæ•´è®²è§£æ·±åº¦
- å–„ç”¨ç±»æ¯”å’Œä¾‹å­å¸®åŠ©ç†è§£
- é¼“åŠ±ä¸»åŠ¨æ€è€ƒå’ŒæŽ¢ç´¢
- æä¾›å¯æ‰§è¡Œçš„è¡ŒåŠ¨å»ºè®®

å›žå¤é£Žæ ¼ï¼š
- è€å¿ƒã€é¼“åŠ±ã€æœ‰æ¡ç†
- æŠŠå¤æ‚æ¦‚å¿µç®€å•åŒ–
- é€‚å½“æé—®å¼•å¯¼æ€è€ƒ"""

    @property
    def name(self) -> str:
        return self._name
    
    @property
    def description(self) -> str:
        return self._description
    
    def can_handle(self, message: Message, context: ChatContext) -> float:
        """åˆ¤æ–­æ˜¯å¦èƒ½å¤„ç†æ­¤æ¶ˆæ¯"""
        if message.has_mention(self.name):
            return 1.0
        
        content = message.content.lower()
        keyword_matches = sum(1 for kw in self._education_keywords if kw in content)
        
        if keyword_matches >= 3:
            return 0.9
        elif keyword_matches == 2:
            return 0.75
        elif keyword_matches == 1:
            return 0.55
        
        return 0.0
    
    def respond(self, message: Message, context: ChatContext) -> AgentResponse:
        """ç”Ÿæˆæ•™è‚²å’¨è¯¢å›žå¤"""
        user_memory = self.memory_read(message.user_id)
        interaction_count = user_memory.get("interaction_count", 0)
        
        content = message.get_clean_content().lower()
        
        # è¯†åˆ«ä¸»é¢˜å¹¶ç”Ÿæˆå“åº”
        if any(word in content for word in ["æ–¹æ³•", "æ•ˆçŽ‡", "ä¸“æ³¨", "è®°å¿†", "å­¦ä¹ æ³•"]):
            topic = "method"
            response = self._respond_method(message, user_memory)
        elif any(word in content for word in ["è€ƒè¯•", "è€ƒç ”", "é«˜è€ƒ", "å¤‡è€ƒ", "å¤ä¹ "]):
            topic = "exam"
            response = self._respond_exam(message, user_memory)
        elif any(word in content for word in ["è‹±è¯­", "å¤–è¯­", "é›…æ€", "æ‰˜ç¦", "å•è¯"]):
            topic = "language"
            response = self._respond_language(message, user_memory)
        elif any(word in content for word in ["æ•°å­¦", "ç‰©ç†", "åŒ–å­¦", "ç¼–ç¨‹", "ç®—æ³•"]):
            topic = "subject"
            response = self._respond_subject(message, user_memory)
        elif any(word in content for word in ["èŒä¸š", "æŠ€èƒ½", "è®¤è¯", "åŸ¹è®­", "è½¬è¡Œ"]):
            topic = "career"
            response = self._respond_career(message, user_memory)
        else:
            topic = "general"
            response = self._respond_general(message, interaction_count)
        
        # æ›´æ–°ç”¨æˆ·è®°å¿†
        user_memory["interaction_count"] = interaction_count + 1
        user_memory["last_topic"] = topic
        user_memory["learning_goals"] = user_memory.get("learning_goals", [])
        self.memory_write(message.user_id, user_memory)
        
        return AgentResponse(
            content=response,
            agent_name=self.name,
            confidence=0.85,
            metadata={"topic": topic},
            should_continue=False
        )
    
    def _respond_method(self, message: Message, user_memory: Dict) -> str:
        """å­¦ä¹ æ–¹æ³•å“åº”"""
        return (
            "ðŸ“š **é«˜æ•ˆå­¦ä¹ æ–¹æ³•æŒ‡å—**\n\n"
            "æˆ‘æ¥åˆ†äº«ä¸€äº›ç»è¿‡éªŒè¯çš„å­¦ä¹ æŠ€å·§ï¼š\n\n"
            "**ðŸŽ¯ è´¹æ›¼å­¦ä¹ æ³•**\n"
            "1. é€‰æ‹©ä¸€ä¸ªæ¦‚å¿µ\n"
            "2. ç”¨ç®€å•è¯­è¨€è®²è§£ç»™åˆ«äºº\n"
            "3. å‘çŽ°è®²ä¸æ¸…æ¥šçš„åœ°æ–¹\n"
            "4. å›žé¡¾å­¦ä¹ ï¼Œç®€åŒ–è¯­è¨€\n\n"
            "**ðŸ§  è‰¾å®¾æµ©æ–¯è®°å¿†æ³•**\n"
            "é—å¿˜æ›²çº¿å¤ä¹ æ—¶é—´ç‚¹ï¼š\n"
            "â€¢ å­¦å®ŒåŽ20åˆ†é’Ÿ\n"
            "â€¢ 1å°æ—¶åŽ\n"
            "â€¢ 1å¤©åŽ\n"
            "â€¢ 1å‘¨åŽ\n"
            "â€¢ 1ä¸ªæœˆåŽ\n\n"
            "**ðŸ… ç•ªèŒ„å·¥ä½œæ³•**\n"
            "â€¢ 25åˆ†é’Ÿä¸“æ³¨å­¦ä¹ \n"
            "â€¢ 5åˆ†é’Ÿä¼‘æ¯\n"
            "â€¢ 4ä¸ªç•ªèŒ„åŽé•¿ä¼‘æ¯15-30åˆ†é’Ÿ\n\n"
            "**ðŸ“ åšç¬”è®°æŠ€å·§**\n"
            "â€¢ ä½¿ç”¨æ€ç»´å¯¼å›¾æ•´ç†çŸ¥è¯†ç»“æž„\n"
            "â€¢ ç”¨è‡ªå·±çš„è¯é‡è¿°é‡ç‚¹\n"
            "â€¢ æ ‡æ³¨ç–‘é—®ï¼ŒåŠæ—¶è§£å†³\n\n"
            "**ðŸ’¡ å°è´´å£«ï¼š**\n"
            "â€¢ å›ºå®šå­¦ä¹ æ—¶é—´å’Œåœ°ç‚¹\n"
            "â€¢ è¿œç¦»æ‰‹æœºç­‰å¹²æ‰°\n"
            "â€¢ é€‚å½“è¿åŠ¨ä¿æŒç²¾åŠ›\n"
            "â€¢ å……è¶³ç¡çœ å·©å›ºè®°å¿†\n\n"
            "æ‚¨ç›®å‰åœ¨å­¦ä¹ ä¸­é‡åˆ°ä»€ä¹ˆå›°éš¾ï¼Ÿ"
        )
    
    def _respond_exam(self, message: Message, user_memory: Dict) -> str:
        """è€ƒè¯•å‡†å¤‡å“åº”"""
        return (
            "ðŸ“ **è€ƒè¯•å¤‡è€ƒç­–ç•¥**\n\n"
            "ç§‘å­¦å¤‡è€ƒï¼Œäº‹åŠåŠŸå€ï¼š\n\n"
            "**å¤‡è€ƒä¸‰é˜¶æ®µï¼š**\n\n"
            "**1ï¸âƒ£ åŸºç¡€é˜¶æ®µï¼ˆ40%æ—¶é—´ï¼‰**\n"
            "â€¢ ç³»ç»Ÿå­¦ä¹ æ‰€æœ‰çŸ¥è¯†ç‚¹\n"
            "â€¢ å»ºç«‹çŸ¥è¯†æ¡†æž¶\n"
            "â€¢ åšåŸºç¡€ç»ƒä¹ é¢˜\n"
            "â€¢ ä¸æ‡‚å°±é—®ï¼Œæ‰«æ¸…ç›²ç‚¹\n\n"
            "**2ï¸âƒ£ å¼ºåŒ–é˜¶æ®µï¼ˆ35%æ—¶é—´ï¼‰**\n"
            "â€¢ ä¸“é¡¹çªç ´è–„å¼±çŽ¯èŠ‚\n"
            "â€¢ å¤§é‡åˆ·é¢˜å·©å›º\n"
            "â€¢ æ€»ç»“è§£é¢˜æŠ€å·§\n"
            "â€¢ å»ºç«‹é”™é¢˜æœ¬\n\n"
            "**3ï¸âƒ£ å†²åˆºé˜¶æ®µï¼ˆ25%æ—¶é—´ï¼‰**\n"
            "â€¢ æ¨¡æ‹Ÿè€ƒè¯•ç»ƒä¹ \n"
            "â€¢ å›žé¡¾é”™é¢˜å’Œé‡ç‚¹\n"
            "â€¢ è°ƒæ•´å¿ƒæ€å’Œä½œæ¯\n"
            "â€¢ é€‚å½“å‡åŽ‹æ”¾æ¾\n\n"
            "**è€ƒåœºæŠ€å·§ï¼š**\n"
            "â€¢ å…ˆæ˜“åŽéš¾ï¼Œåˆç†åˆ†é…æ—¶é—´\n"
            "â€¢ ä»”ç»†å®¡é¢˜ï¼Œé¿å…ç²—å¿ƒ\n"
            "â€¢ ä¿æŒå†·é™ï¼Œç›¸ä¿¡è‡ªå·±\n"
            "â€¢ æ£€æŸ¥ç­”æ¡ˆï¼Œä¸è¦ç©ºé¢˜\n\n"
            "ðŸŽ¯ æ‚¨æ­£åœ¨å‡†å¤‡ä»€ä¹ˆè€ƒè¯•ï¼Ÿæˆ‘å¯ä»¥ç»™å‡ºæ›´å…·ä½“çš„å»ºè®®ã€‚"
        )
    
    def _respond_language(self, message: Message, user_memory: Dict) -> str:
        """è¯­è¨€å­¦ä¹ å“åº”"""
        return (
            "ðŸŒ **è¯­è¨€å­¦ä¹ æ”»ç•¥**\n\n"
            "æŽŒæ¡è¯­è¨€å­¦ä¹ çš„æ­£ç¡®æ–¹æ³•ï¼š\n\n"
            "**è¯æ±‡å­¦ä¹ ï¼š**\n"
            "â€¢ åœ¨è¯­å¢ƒä¸­è®°å•è¯ï¼ˆä¾‹å¥ã€æ–‡ç« ï¼‰\n"
            "â€¢ ä½¿ç”¨è¯æ ¹è¯ç¼€æ‹“å±•è¯æ±‡\n"
            "â€¢ é—´éš”é‡å¤è®°å¿†ï¼ˆAnkiç­‰å·¥å…·ï¼‰\n"
            "â€¢ æ¯å¤©å›ºå®šæ—¶é—´èƒŒè¯µ\n\n"
            "**å¬åŠ›æå‡ï¼š**\n"
            "â€¢ ä»Žç®€å•ææ–™å¼€å§‹\n"
            "â€¢ ç²¾å¬ + æ³›å¬ç»“åˆ\n"
            "â€¢ è·Ÿè¯»æ¨¡ä»¿è¯­éŸ³è¯­è°ƒ\n"
            "â€¢ é€æ¸æé«˜éš¾åº¦\n\n"
            "**å£è¯­ç»ƒä¹ ï¼š**\n"
            "â€¢ æ¯å¤©å¤§å£°æœ—è¯»\n"
            "â€¢ æ¨¡ä»¿åŽŸç‰ˆå‘éŸ³\n"
            "â€¢ æ‰¾è¯­ä¼´æˆ–ç”¨AIç»ƒä¹ \n"
            "â€¢ ä¸æ€•çŠ¯é”™ï¼Œå¤šå¼€å£\n\n"
            "**é˜…è¯»æå‡ï¼š**\n"
            "â€¢ é€‰æ‹©é€‚åˆæ°´å¹³çš„ææ–™\n"
            "â€¢ å…ˆæ³›è¯»ç†è§£å¤§æ„\n"
            "â€¢ å†ç²¾è¯»å­¦ä¹ è¡¨è¾¾\n"
            "â€¢ ç§¯ç´¯åœ°é“è¡¨è¾¾\n\n"
            "**é›…æ€/æ‰˜ç¦å¤‡è€ƒï¼š**\n"
            "â€¢ ç†Ÿæ‚‰è€ƒè¯•å½¢å¼å’Œè¯„åˆ†æ ‡å‡†\n"
            "â€¢ åšçœŸé¢˜æ¨¡æ‹Ÿç»ƒä¹ \n"
            "â€¢ é’ˆå¯¹å¼±é¡¹ä¸“é¡¹ç»ƒä¹ \n\n"
            "ðŸ“– æ‚¨ç›®å‰çš„è¯­è¨€å­¦ä¹ ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ"
        )
    
    def _respond_subject(self, message: Message, user_memory: Dict) -> str:
        """å­¦ç§‘çŸ¥è¯†å“åº”"""
        return (
            "ðŸ”¬ **å­¦ç§‘å­¦ä¹ æŒ‡å¯¼**\n\n"
            "æ¯ä¸ªå­¦ç§‘éƒ½æœ‰å…¶ç‰¹ç‚¹å’Œå­¦ä¹ æ–¹æ³•ï¼š\n\n"
            "**ðŸ“ æ•°å­¦å­¦ä¹ ï¼š**\n"
            "â€¢ ç†è§£æ¦‚å¿µæ¯”è®°å¿†å…¬å¼æ›´é‡è¦\n"
            "â€¢ å¤šåšé¢˜ï¼Œç†Ÿç»ƒæŽŒæ¡æ–¹æ³•\n"
            "â€¢ æ€»ç»“é¢˜åž‹å’Œè§£é¢˜æ€è·¯\n"
            "â€¢ é”™é¢˜åå¤ç»ƒä¹ \n\n"
            "**ðŸ”­ ç‰©ç†å­¦ä¹ ï¼š**\n"
            "â€¢ ç†è§£ç‰©ç†è§„å¾‹çš„æœ¬è´¨\n"
            "â€¢ ç”»å›¾åˆ†æžé—®é¢˜\n"
            "â€¢ å»ºç«‹ç‰©ç†æ¨¡åž‹æ€ç»´\n"
            "â€¢ è”ç³»ç”Ÿæ´»å®žé™…\n\n"
            "**âš—ï¸ åŒ–å­¦å­¦ä¹ ï¼š**\n"
            "â€¢ æŽŒæ¡å…ƒç´ å‘¨æœŸè¡¨è§„å¾‹\n"
            "â€¢ ç†è§£ååº”åŽŸç†\n"
            "â€¢ è®°å¿†åŒ–å­¦æ–¹ç¨‹å¼\n"
            "â€¢ åšå¥½å®žéªŒç¬”è®°\n\n"
            "**ðŸ’» ç¼–ç¨‹å­¦ä¹ ï¼š**\n"
            "â€¢ ä»ŽåŸºç¡€è¯­æ³•å¼€å§‹\n"
            "â€¢ å¤šåŠ¨æ‰‹å†™ä»£ç \n"
            "â€¢ åšé¡¹ç›®å®žè·µ\n"
            "â€¢ é˜…è¯»ä¼˜ç§€ä»£ç \n\n"
            "ðŸ“š æ‚¨æƒ³æ·±å…¥äº†è§£å“ªä¸ªå­¦ç§‘ï¼Ÿæˆ–è€…æœ‰å…·ä½“é—®é¢˜éœ€è¦è§£ç­”ï¼Ÿ"
        )
    
    def _respond_career(self, message: Message, user_memory: Dict) -> str:
        """èŒä¸šå­¦ä¹ å“åº”"""
        return (
            "ðŸŽ¯ **èŒä¸šæŠ€èƒ½æå‡**\n\n"
            "æŒç»­å­¦ä¹ æ˜¯èŒä¸šå‘å±•çš„å…³é”®ï¼š\n\n"
            "**æŠ€èƒ½æå‡è·¯å¾„ï¼š**\n\n"
            "1ï¸âƒ£ **æ˜Žç¡®ç›®æ ‡**\n"
            "â€¢ åˆ†æžè¡Œä¸šå‘å±•è¶‹åŠ¿\n"
            "â€¢ äº†è§£å²—ä½æŠ€èƒ½è¦æ±‚\n"
            "â€¢ è¯„ä¼°è‡ªèº«å·®è·\n\n"
            "2ï¸âƒ£ **åˆ¶å®šè®¡åˆ’**\n"
            "â€¢ è®¾å®šçŸ­æœŸå’Œé•¿æœŸç›®æ ‡\n"
            "â€¢ åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„æ­¥éª¤\n"
            "â€¢ å®‰æŽ’å›ºå®šå­¦ä¹ æ—¶é—´\n\n"
            "3ï¸âƒ£ **é€‰æ‹©èµ„æº**\n"
            "â€¢ åœ¨çº¿è¯¾ç¨‹ï¼ˆCourseraã€Udemyç­‰ï¼‰\n"
            "â€¢ ä¸“ä¸šä¹¦ç±\n"
            "â€¢ è¡Œä¸šè®¤è¯åŸ¹è®­\n"
            "â€¢ å®žæˆ˜é¡¹ç›®ç»éªŒ\n\n"
            "**çƒ­é—¨è®¤è¯æŽ¨èï¼š**\n"
            "â€¢ æŠ€æœ¯ç±»ï¼šAWSã€PMPã€CPA\n"
            "â€¢ è¯­è¨€ç±»ï¼šé›…æ€ã€BECã€ç¿»è¯‘è¯\n"
            "â€¢ ç®¡ç†ç±»ï¼šMBAã€EMBA\n\n"
            "**å­¦ä¹ å»ºè®®ï¼š**\n"
            "â€¢ æ¯å¤©ä¿æŒå­¦ä¹ 1-2å°æ—¶\n"
            "â€¢ å­¦ä»¥è‡´ç”¨ï¼Œåœ¨å·¥ä½œä¸­å®žè·µ\n"
            "â€¢ åŠ å…¥å­¦ä¹ ç¤¾ç¾¤äº¤æµ\n"
            "â€¢ è¾“å‡ºå€’é€¼è¾“å…¥ï¼ˆå†™æ–‡ç« ã€åˆ†äº«ï¼‰\n\n"
            "ðŸ’¼ æ‚¨æƒ³æå‡å“ªæ–¹é¢çš„æŠ€èƒ½ï¼Ÿ"
        )
    
    def _respond_general(self, message: Message, interaction_count: int) -> str:
        """é€šç”¨æ•™è‚²å“åº”"""
        if interaction_count == 0:
            return (
                "ðŸ“– **æ¬¢è¿Žå’¨è¯¢æ•™è‚²å­¦ä¹ æœåŠ¡**\n\n"
                "æˆ‘æ˜¯æ‚¨çš„å­¦ä¹ é¡¾é—®ï¼Œå¯ä»¥å¸®åŠ©æ‚¨ï¼š\n\n"
                "ðŸ“š å­¦ä¹ æ–¹æ³•\n"
                "â€¢ é«˜æ•ˆå­¦ä¹ æŠ€å·§\n"
                "â€¢ è®°å¿†æ–¹æ³•\n"
                "â€¢ ä¸“æ³¨åŠ›æå‡\n\n"
                "ðŸ“ è€ƒè¯•å‡†å¤‡\n"
                "â€¢ å¤‡è€ƒç­–ç•¥è§„åˆ’\n"
                "â€¢ å„ç±»è€ƒè¯•æŒ‡å¯¼\n\n"
                "ðŸŒ è¯­è¨€å­¦ä¹ \n"
                "â€¢ è‹±è¯­åŠå…¶ä»–å¤–è¯­\n"
                "â€¢ å¬è¯´è¯»å†™æŠ€å·§\n\n"
                "ðŸ”¬ çŸ¥è¯†é—®ç­”\n"
                "â€¢ å„å­¦ç§‘çŸ¥è¯†è§£ç­”\n"
                "â€¢ æ¦‚å¿µè®²è§£\n\n"
                "ðŸ’¼ èŒä¸šå‘å±•\n"
                "â€¢ æŠ€èƒ½æå‡å»ºè®®\n"
                "â€¢ è®¤è¯è€ƒè¯•æŒ‡å¯¼\n\n"
                "è¯·å‘Šè¯‰æˆ‘æ‚¨æƒ³äº†è§£ä»€ä¹ˆå­¦ä¹ è¯é¢˜ï¼Ÿ"
            )
        else:
            return (
                "ðŸ“š æˆ‘éšæ—¶å‡†å¤‡ä¸ºæ‚¨è§£ç­”å­¦ä¹ é—®é¢˜ã€‚\n\n"
                "æ— è®ºæ˜¯å­¦ä¹ æ–¹æ³•ã€è€ƒè¯•å‡†å¤‡ï¼Œè¿˜æ˜¯çŸ¥è¯†è§£ç­”ï¼Œ"
                "éƒ½å¯ä»¥è·Ÿæˆ‘äº¤æµã€‚\n\n"
                "ðŸ’¡ å­¦ä¹ æ˜¯ä¸€åœºé©¬æ‹‰æ¾ï¼ŒåšæŒå°±æ˜¯èƒœåˆ©ï¼\n\n"
                "è¯·é—®æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©æ‚¨çš„ï¼Ÿ"
            )
    
    def memory_read(self, user_id: str) -> Dict[str, Any]:
        return self._memory.read(self.name, user_id)
    
    def memory_write(self, user_id: str, data: Dict[str, Any]) -> None:
        self._memory.write(self.name, user_id, data)
